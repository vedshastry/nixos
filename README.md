# NixOS Configuration for ThinkPad T14 Gen 5 (AMD)

This repository contains the complete, declarative configuration for a NixOS system running on a Lenovo ThinkPad T14 Gen 5 (AMD). It is managed using Nix Flakes, ensuring a reproducible and personalized computing environment.

The primary goal of this setup is to create a highly-tailored, minimalist, and developer-centric environment while coexisting in a dual-boot setup with Arch Linux.

## Core Features

- **Declarative & Reproducible**: The entire system configuration, from the bootloader to application settings, is defined in this repository. Nix Flakes are used to pin dependencies, guaranteeing that the system can be rebuilt identically on any machine.
- **Rolling Release**: Follows the `nixos-unstable` channel to provide access to the latest software packages and system updates.
- **Dual-Boot with Arch Linux**:
    - **GRUB Bootloader**: Manages the boot process, including a custom menu entry to boot into an existing Arch Linux installation.
    - **Encrypted Partition Sharing**: Mounts an encrypted `btrfs` partition from Arch Linux, allowing seamless sharing of `/home` data between the two operating systems.
- **Personalized Desktop Environment**:
    - **Suckless Tools**: Uses a suite of custom-built suckless utilities (`dwm`, `st`, `dmenu`, `slstatus`) fetched directly from personal GitHub repositories.
    - **Xorg & DWM**: Configured with the Xorg display server and `dwm` as the tiling window manager.
- **Hardware-Specific Optimizations**:
    - Leverages the `nixos-hardware` repository for specific tweaks tailored to the Lenovo ThinkPad T14s Gen 4 AMD, which is a close analog for the Gen 5.
    - Uses the latest stable Linux kernel to ensure compatibility with the modern "Hawk Point" APU.
    - Enables services for the fingerprint reader (`fprintd`) and firmware updates (`fwupd`).
- **User Environment with Home Manager**:
    - `home-manager` is used to declaratively manage the `ved` user's environment.
    - Installs user-specific applications such as `zen-browser`, `neovim`, `pulsar`, `dropbox`, and development tools.
    - Configures `zsh` with Oh-My-Zsh, aliases, and syntax highlighting.
    - Manages Git configuration.

## Repository Structure

- `flake.nix`: The entry point for the NixOS configuration. It defines all inputs (Nixpkgs, Home Manager, custom tools) and orchestrates the system build.
- `configuration.nix`: The main system-level configuration. It defines bootloader settings, filesystems, system packages, services (audio, graphics, networking), and system-wide user settings.
- `home.nix`: The `home-manager` configuration for the user `ved`. It specifies user-level packages, shell configuration, and dotfile management.
- `hardware-configuration.nix`: Hardware-specific settings auto-generated by the NixOS installer, primarily defining disk mounts and essential kernel modules.
- `symlink/symlink.sh`: A utility script designed to be run after installation to create symlinks from the mounted Arch Linux home directory to the NixOS home directory. This enables sharing of data, repositories, and configurations between the two OSes.

## How to Use

This configuration is specific to the hardware and user mentioned. However, it can be adapted for other systems.

To build and switch to this configuration on the target machine:

```bash
sudo nixos-rebuild switch --flake .#thinkpad
```
